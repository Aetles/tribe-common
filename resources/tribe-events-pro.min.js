Object.prototype.hasOwnProperty.call(window,"tribe_ev")&&(tribe_ev.geoloc={map:[],geocoder:[],geocodes:[],bounds:[],markers:[]});
(function(a,k,g,f,e,m,p){a.extend(tribe_ev.fn,{has_address:function(a,c){for(var d=0;d<c.length;d++)if(c[d].formatted_address==a)return!0;return!1},pre_ajax:function(b){if(a("#tribe-bar-geoloc").length){var c=a("#tribe-bar-geoloc").val();c.length?g.process_geocoding(c,function(d){f.geocodes=d;if(1<f.geocodes.length&&!g.has_address(c,f.geocodes))g.print_geo_options();else{var h=d[0].geometry.location.lat();d=d[0].geometry.location.lng();h&&a("#tribe-bar-geoloc-lat").val(h);d&&a("#tribe-bar-geoloc-lng").val(d);
b&&"function"===typeof b&&(a("#tribe_events_filter_item_geofence").length&&a("#tribe_events_filter_item_geofence").show(),b())}}):(a("#tribe-bar-geoloc-lat, #tribe-bar-geoloc-lng").val(""),b&&"function"===typeof b&&(a("#tribe_events_filter_item_geofence").length&&(a("#tribe_events_filter_item_geofence input").prop("checked",!1),a("#tribe_events_filter_item_geofence").hide().find("select").prop("selectedIndex",0)),b()))}else b&&"function"===typeof b&&b()},pro_tooltips:function(){a("#tribe-events").on("mouseenter",
'div[id*="tribe-events-event-"], div[id*="tribe-events-daynum-"]:has(a), div.event-is-recurring',function(){var b=0,c=a(this);if(a("body").hasClass("tribe-events-week")){var d=c.find(".tribe-events-tooltip");if(c.parents(".tribe-grid-allday").length)b=c.outerHeight()+6,d.css("bottom",b).show();else{var h=a(".tribe-week-grid-wrapper"),e=c.parent(),b=e.parent(),l=Math.ceil(b.width()),f=Math.ceil(c.width()),g=Math.ceil(d.outerWidth()),b=h.height(),k=h.scrollTop(),h=e.position(),c=c.position(),c=Math.ceil(c.top),
c=k-c,e=e.hasClass("tribe-events-right"),k={};d.hasClass("hovered")||d.attr("data-ow",g).addClass("hovered");l=e?Math.ceil(h.left)-20:l-f-Math.ceil(h.left);g=g>=l?l:d.attr("data-ow")>l?l:d.attr("data-ow");k=e?{right:f+20,bottom:"auto",width:g+"px"}:{left:f+20,bottom:"auto",width:g+"px"};d.css(k);f=d.height();0<=c?c+=5:(b=c+b,c=f>b?b-f-8:5);d.css("top",c).show()}}})},print_geo_options:function(){a("#tribe-geo-links").empty();a("#tribe-geo-options").show();for(var b=0;b<f.geocodes.length;b++)a("<a/>").text(f.geocodes[b].formatted_address).attr("href",
"#").addClass("tribe-geo-option-link").attr("data-index",b).appendTo("#tribe-geo-links"),m.map_view()&&g.map_add_marker(f.geocodes[b].geometry.location.lat(),f.geocodes[b].geometry.location.lng(),f.geocodes[b].formatted_address)},process_geocoding:function(a,c){f.geocoder.geocode({address:a},function(a,b){if(b==google.maps.GeocoderStatus.OK)return c(a),a;b==google.maps.GeocoderStatus.ZERO_RESULTS&&GeoLoc.map_view&&spin_end();return b})},set_recurrence:function(a){a?(e.recurrence=!0,tribe_storage&&
tribe_storage.setItem("tribeHideRecurrence","1")):(e.recurrence=!1,tribe_storage&&tribe_storage.setItem("tribeHideRecurrence","0"))}});a.extend(tribe_ev.tests,{hide_recurrence:function(){return a("#tribeHideRecurrence:checked").length?!0:!1}});a(document).ready(function(){function b(){var b=document.URL,c="?";0<b.indexOf("?")&&(c="&");b=b+c+"ical=1&tribe_display="+e.view;a("a.tribe-events-ical").attr("href",b)}a(".tribe-bar-geoloc-filter").length&&a(".tribe-bar-geoloc-filter").append('<div id="tribe-geo-options"><div id="tribe-geo-links"></div></div>');
var c=a("#tribe-events"),d=a("#tribe-bar-geoloc"),h=a("#tribe-geo-options"),n=!1;g.pro_tooltips();m.hide_recurrence()&&g.set_recurrence(!0);a(k).on("tribe_ev_ajaxSuccess",function(){b()});b();e.recurrence=m.hide_recurrence();c.on("click","#tribeHideRecurrence",function(){e.popping=!1;e.do_string=!0;e.paged=1;n=a(this).is(":checked")?!0:!1;g.set_recurrence(n);a(k).trigger("tribe_ev_updatingRecurrence").trigger("tribe_ev_runAjax")});a(k).on("tribe_ev_preCollectBarParams",function(){d.length&&(d.val().length?
"map"===e.view_target&&(e.url_params.action="tribe_geosearch"):a("#tribe-bar-geoloc-lat, #tribe-bar-geoloc-lng").val(""));tribe_storage&&"1"===tribe_storage.getItem("tribeHideRecurrence")&&("month"!==e.view_target&&"week"!==e.view_target)&&(e.url_params.tribeHideRecurrence="1")});m.map_view()||(h.length&&(c.on("click",".tribe-geo-option-link",function(b){b.preventDefault();b.stopPropagation();b=a(this);a(".tribe-geo-option-link").removeClass("tribe-option-loaded");b.addClass("tribe-option-loaded");
d.val(b.text());a("#tribe-bar-geoloc-lat").val(f.geocodes[b.attr("data-index")].geometry.location.lat());a("#tribe-bar-geoloc-lng").val(f.geocodes[b.attr("data-index")].geometry.location.lng());g.pre_ajax(function(){a(k).trigger("tribe_ev_runAjax");h.hide()})}),a("body").on("click",function(a){h.hide()})),g.snap("#tribe-geo-wrapper","#tribe-geo-wrapper","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a"));p&&debug.info("tribe-events-pro.js successfully loaded")})})(jQuery,
tribe_ev.events,tribe_ev.fn,tribe_ev.geoloc,tribe_ev.state,tribe_ev.tests,tribe_debug);
