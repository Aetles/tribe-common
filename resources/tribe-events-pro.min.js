Object.prototype.hasOwnProperty.call(window,"tribe_ev")&&(tribe_ev.geoloc={map:[],geocoder:[],geocodes:[],bounds:[],markers:[],refine:!1});
(function(r,n,b,k,g,e,f,m,q){b.extend(tribe_ev.fn,{has_address:function(b,a){for(var d=0;d<a.length;d++)if(a[d].formatted_address==b)return!0;return!1},pre_ajax:function(c){if(b("#tribe-bar-geoloc").length){var a=b("#tribe-bar-geoloc").val();a.length?g.process_geocoding(a,function(d){e.geocodes=d;if(1<e.geocodes.length&&!g.has_address(a,e.geocodes))g.print_geo_options();else{var h=d[0].geometry.location.lat();d=d[0].geometry.location.lng();h&&b("#tribe-bar-geoloc-lat").val(h);d&&b("#tribe-bar-geoloc-lng").val(d);
c&&"function"===typeof c&&(b("#tribe_events_filter_item_geofence").length&&b("#tribe_events_filter_item_geofence").show(),c())}}):(b("#tribe-bar-geoloc-lat, #tribe-bar-geoloc-lng").val(""),c&&"function"===typeof c&&(b("#tribe_events_filter_item_geofence").length&&(b("#tribe_events_filter_item_geofence input").prop("checked",!1),b("#tribe_events_filter_item_geofence").hide().find("select").prop("selectedIndex",0)),c()))}else c&&"function"===typeof c&&c()},print_geo_options:function(){b("#tribe-geo-links").empty();
b("#tribe-geo-options").show();var c=[];e.refine=!0;for(var a=0;a<e.geocodes.length;a++){var d=e.geocodes[a].formatted_address;c[d]||(c[d]=!0,b("<a/>").text(d).attr("href","#").addClass("tribe-geo-option-link").data("index",a).appendTo("#tribe-geo-links"),m.map_view()&&g.map_add_marker(e.geocodes[a].geometry.location.lat(),e.geocodes[a].geometry.location.lng(),d))}e.refine=!1},pro_tooltips:function(){b("#tribe-events").on("mouseenter",'div[id*="tribe-events-event-"], div[id*="tribe-events-daynum-"]:has(a), div.event-is-recurring',
function(){var c=0,a=b(this);if(b("body").hasClass("tribe-events-week")){var d=a.find(".tribe-events-tooltip");if(a.parents(".tribe-grid-allday").length)c=a.outerHeight()+6,d.css("bottom",c).show();else{var h=b(".tribe-week-grid-wrapper"),e=a.parent(),c=e.parent(),l=Math.ceil(c.width()),f=Math.ceil(a.width()),g=Math.ceil(d.outerWidth()),c=h.height(),k=h.scrollTop(),h=e.position(),a=a.position(),a=Math.ceil(a.top),a=k-a,e=e.hasClass("tribe-events-right"),k={};d.hasClass("hovered")||d.data("ow",g).addClass("hovered");
l=e?Math.ceil(h.left)-20:l-f-Math.ceil(h.left);g=g>=l?l:d.data("ow")>l?l:d.data("ow");k=e?{right:f+20,bottom:"auto",width:g+"px"}:{left:f+20,bottom:"auto",width:g+"px"};d.css(k);f=d.height();0<=a?a+=5:(c=a+c,a=f>c?c-f-8:5);d.css("top",a).show()}}})},process_geocoding:function(b,a){e.geocoder.geocode({address:b},function(b,c){if(c==google.maps.GeocoderStatus.OK)return a(b),b;c==google.maps.GeocoderStatus.ZERO_RESULTS&&GeoLoc.map_view&&spin_end();return c})},set_recurrence:function(b){b?(f.recurrence=
!0,tribe_storage&&tribe_storage.setItem("tribeHideRecurrence","1")):(f.recurrence=!1,tribe_storage&&tribe_storage.setItem("tribeHideRecurrence","0"))}});b.extend(tribe_ev.tests,{hide_recurrence:function(){return b("#tribeHideRecurrence:checked").length?!0:!1}});b(n).ready(function(){function c(){var a=n.URL,c="?";0<a.indexOf("?")&&(c="&");a=a+c+"ical=1&tribe_display="+f.view;b("a.tribe-events-ical").attr("href",a)}b(".tribe-bar-geoloc-filter").length&&b(".tribe-bar-geoloc-filter").append('<div id="tribe-geo-options"><div id="tribe-geo-links"></div></div>');
var a=b("#tribe-events"),d=b("#tribe-bar-geoloc"),h=b("#tribe-geo-options"),p=!1;g.pro_tooltips();m.hide_recurrence()&&g.set_recurrence(!0);b(k).on("tribe_ev_ajaxSuccess",function(){c()});c();f.recurrence=m.hide_recurrence();a.on("click","#tribeHideRecurrence",function(){f.popping=!1;f.do_string=!0;f.paged=1;p=b(this).is(":checked")?!0:!1;g.set_recurrence(p);b(k).trigger("tribe_ev_updatingRecurrence").trigger("tribe_ev_runAjax")});b(k).on("tribe_ev_preCollectBarParams",function(){d.length&&(d.val().length?
"map"===f.view_target&&(f.url_params.action="tribe_geosearch"):b("#tribe-bar-geoloc-lat, #tribe-bar-geoloc-lng").val(""));tribe_storage&&"1"===tribe_storage.getItem("tribeHideRecurrence")&&("month"!==f.view_target&&"week"!==f.view_target)&&(f.url_params.tribeHideRecurrence="1")});m.map_view()||(h.length&&(a.on("click",".tribe-geo-option-link",function(a){a.preventDefault();a.stopPropagation();a=b(this);b(".tribe-geo-option-link").removeClass("tribe-option-loaded");a.addClass("tribe-option-loaded");
d.val(a.text());b("#tribe-bar-geoloc-lat").val(e.geocodes[a.data("index")].geometry.location.lat());b("#tribe-bar-geoloc-lng").val(e.geocodes[a.data("index")].geometry.location.lng());g.pre_ajax(function(){b(k).trigger("tribe_ev_runAjax");h.hide()})}),b("body").on("click",function(a){h.hide()})),g.snap("#tribe-geo-wrapper","#tribe-geo-wrapper","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a"));q&&debug.info("TEC Debug: tribe-events-pro.js successfully loaded")})})(window,
document,jQuery,tribe_ev.events,tribe_ev.fn,tribe_ev.geoloc,tribe_ev.state,tribe_ev.tests,tribe_debug);
