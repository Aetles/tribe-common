jQuery(document).ready(function(e){function t(){var t=e(".tribe-mini-calendar-wrapper");if(e(".tribe-mini-calendar-wrapper.layout-wide").length&&e(".tribe-mini-calendar-right").length){var n=e(".tribe-mini-calendar-right"),r=t.height(),i=n.outerHeight();i+=20;i>r?t.css("height",i+"px"):t.css("height","auto")}else e(".tribe-mini-calendar-wrapper.layout-wide").length&&t.css("height","auto")}function n(t){e(".tribe-mini-calendar .tribe-events-thismonth").removeClass("tribe-mini-calendar-today");t.parents(".tribe-events-has-events").addClass("tribe-mini-calendar-today")}t();e(".tribe-mini-calendar-wrapper").delegate(".tribe-mini-calendar-nav-link","click",function(n){n.preventDefault();var r=e(this),i=r.closest(".tribe-mini-calendar"),s=r.closest(".tribe-mini-calendar-wrapper"),o=r.attr("data-month"),u={action:"tribe-mini-cal",eventDate:o,count:i.data("count"),tax_query:i.data("tax-query"),nonce:i.data("nonce")};i.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show();e.post(TribeMiniCalendar.ajaxurl,u,function(n){i.find(".tribe-mini-calendar-list-wrapper").remove();if(n.success){var r=e(n.html).contents().filter(function(){return this.nodeType!=3});i.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide();s.empty().html(r);t()}})});e(".tribe-mini-calendar-wrapper").delegate(".tribe-mini-calendar-day-link","click",function(r){r.preventDefault();var i=e(this),s=i.attr("data-day"),o=i.text(),u=i.closest(".tribe-mini-calendar"),a=u.parent().siblings(".tribe-mini-calendar-list-wrapper");e("h2.tribe-mini-calendar-title").text(e("#tribe-mini-calendar-month-name").val()+" "+o+" Events");n(i);var f={action:"tribe-mini-cal-day",eventDate:s,count:u.data("count"),tax_query:u.data("tax-query"),nonce:u.data("nonce")};u.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show();e.post(TribeMiniCalendar.ajaxurl,f,function(r){if(r.success){var s=e(r.html).contents().filter(function(){return this.nodeType!=3});u.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide();a.empty().html(s);n(i);t()}})})});