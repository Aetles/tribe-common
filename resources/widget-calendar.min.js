jQuery(document).ready(function(c){function f(){var a=c(".tribe-mini-calendar-wrapper");if(c(".tribe-mini-calendar-wrapper.layout-wide").length&&c(".tribe-mini-calendar-right").length){var b=c(".tribe-mini-calendar-right"),e=a.height(),b=b.outerHeight(),b=b+20;b>e?a.css("height",b+"px"):a.css("height","auto")}else c(".tribe-mini-calendar-wrapper.layout-wide").length&&a.css("height","auto")}function g(a){c(".tribe-mini-calendar .tribe-events-thismonth").removeClass("tribe-mini-calendar-today");a.parents(".tribe-events-has-events").addClass("tribe-mini-calendar-today")}
f();c(".tribe-mini-calendar-wrapper").delegate(".tribe-mini-calendar-nav-link","click",function(a){a.preventDefault();a=c(this);var b=a.closest(".tribe-mini-calendar"),e=a.closest(".tribe-mini-calendar-wrapper");a={action:"tribe-mini-cal",eventDate:a.attr("data-month"),count:b.data("count"),tax_query:b.data("tax-query"),nonce:b.data("nonce")};b.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show();c.post(TribeMiniCalendar.ajaxurl,a,function(a){b.find(".tribe-mini-calendar-list-wrapper").remove();
a.success&&(c(a.html).contents().filter(function(){return 3!=this.nodeType}),b.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide(),e.empty().html(a.html),f())})});c(".tribe-mini-calendar-wrapper").delegate(".tribe-mini-calendar-day-link","click",function(a){a.preventDefault();var b=c(this);a=b.attr("data-day");var e=b.text(),d=b.closest(".tribe-mini-calendar"),h=d.parent().siblings(".tribe-mini-calendar-list-wrapper");c("h2.tribe-mini-calendar-title").text(c("#tribe-mini-calendar-month-name").val()+
" "+e+" Events");g(b);a={action:"tribe-mini-cal-day",eventDate:a,count:d.data("count"),tax_query:d.data("tax-query"),nonce:d.data("nonce")};d.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show();c.post(TribeMiniCalendar.ajaxurl,a,function(a){a.success&&(a=c(a.html).contents().filter(function(){return 3!=this.nodeType}),d.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide(),h.empty().html(a),g(b),f())})})});
