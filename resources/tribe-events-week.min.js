!function(a,b,c,d,e,f,g,h){c(b).ready(function(){function i(){c(".tribe-week-grid-wrapper").slimScroll({height:"500px",railVisible:!0,alwaysVisible:!0,start:B})}function j(){c(".tribe-grid-body .column:eq(5), .tribe-grid-body .column:eq(6), .tribe-grid-body .column:eq(7)").addClass("tribe-events-right")}function k(){c(".tribe-event-placeholder").each(function(){var a=c(this).attr("data-event-id"),b=parseInt(c("#tribe-events-event-"+a).outerHeight());c(this).height(b)})}function l(){for(var a=c(".tribe-grid-allday"),b=a.find(".vevent"),d=parseInt(c(".tribe-grid-content-wrap .column").width())-8,e=1;8>e;e++)b.hasClass("tribe-dayspan"+e)&&a.find(".tribe-dayspan"+e).children("div").css("width",d*e+(4*(2*e-2)+(e-1))+"px")}function m(a){a.each(function(){var a=c(this),b=a.next(),d={left:"0",width:"65%"},e={right:"0",width:"65%"};if(b.length){var f=b.offset(),g=[f.left,f.left+b.outerWidth()],h=[f.top,f.top+b.outerHeight()],i=a.offset(),j=[i.left,i.left+a.outerWidth()],k=[i.top,i.top+a.outerHeight()];g[0]<j[1]&&g[1]>j[0]&&h[0]<k[1]&&h[1]>k[0]&&(a.is(".overlap-right")?b.css(d).addClass("overlap-left"):a.is(".overlap-left")?b.css(e).addClass("overlap-right"):(a.css(d),b.css(e).addClass("overlap-right")))}})}function n(){var a=c(".tribe-grid-body .tribe-grid-content-wrap .column > div[id*='tribe-events-event-']"),b=c(".tribe-week-grid-inner-wrap").height(),d=5e3;a.each(function(){var a=c(this),e=a.attr("data-hour"),f=a.attr("data-duration"),g=a.attr("data-min"),h=c('.tribe-week-grid-block[data-hour="'+e+'"]'),i=h.offset().top-h.parent().offset().top-h.parent().scrollTop();i=parseInt(Math.round(i))+parseInt(g);var j=parseInt(b)-parseInt(f)-parseInt(i);0>j&&(f=f+j-14);var k={height:f-16+"px"};d>i&&(d=i,B=a),a.css({height:f+"px",top:i+"px"}).find("a").css(k).parent().css(k)}),a.length||(B=c(".column.tribe-week-grid-hours div:first-child")),i(),c("div[id^='tribe-events-event-']").css({visibility:"visible",opacity:"0"}).delay(500).animate({opacity:"1"},{duration:250}),m(a),tribe_ev.fn.equal_height(c(".tribe-grid-header .tribe-grid-content-wrap .column")),tribe_ev.fn.equal_height(c(".tribe-grid-allday .column")),setTimeout(function(){var a=c(".tribe-grid-body").height();c(".tribe-grid-body .tribe-grid-content-wrap .column").height(a)},250)}function o(a){var b=c('.tribe-mobile-day[data-day="'+a+'"]'),d=c('.column[title="'+a+'"] .tribe-week-event');d.length&&d.each(function(){var a=c(this);if(a.tribe_has_attr("data-tribejson")){var d=a.data("tribejson");b.append(tribe_tmpl("tribe_tmpl_week_mobile",d))}})}function p(a,b){var d=c("#tribe-mobile-container"),e=c('.tribe-mobile-day[data-day="'+a+'"]');e.length?e.show():(d.append('<div class="tribe-mobile-day" data-day="'+a+'"></div>'),o(a)),e.length||(e=c('.tribe-mobile-day[data-day="'+a+'"]')),!e.find("h5").length&&e.find(".tribe-events-mobile").length&&e.prepend('<h5 class="tribe-mobile-day-date">'+b+"</h5>")}function q(){var a=c(".tribe-events-mobile-day"),b=c("#tribe-events-content > .tribe-events-grid");c("#tribe-mobile-container").length||c('<div id="tribe-mobile-container" />').insertAfter(b),a.each(function(){var a=c(this),b=a.attr("title"),d=c('.tribe-grid-content-wrap .column[title="'+b+'"]'),e=d.find("span").attr("data-full-date");p(b,e)})}function r(){u.is(".tribe-mobile")?q():(k(),l(),j(),n())}function s(a,b){if("change_view"!=tribe_events_bar_action){if(a.preventDefault(),g.ajax_running)return;var e=c("#tribe-bar-date");g.popping=!1,b?(g.date=b,d.cur_url=d.base_url+g.date+"/"):e.length&&""!==e.val()?(g.date="0"!==g.datepicker_format?tribeDateFormat(e.bootstrapDatepicker("getDate"),"tribeQuery"):e.val(),d.cur_url=d.base_url+g.date+"/"):A?d.cur_url=d.base_url+g.date+"/":(g.date=d.cur_date,d.cur_url=d.base_url+d.cur_date+"/"),f.pre_ajax(function(){t()})}}function t(){if(!f.invalid_date(g.date)){{c("#tribe-events-header")}c(".tribe-events-grid").tribe_spin(),g.pushcount=0,g.ajax_running=!0,g.popping||(g.filter_cats&&(d.cur_url=d.base_url),g.params={action:"tribe_week",eventDate:g.date},g.url_params={},g.category&&(g.params.tribe_event_category=g.category),c(e).trigger("tribe_ev_serializeBar"),g.params=c.param(g.params),g.url_params=c.param(g.url_params),c(e).trigger("tribe_ev_collectParams"),g.pushstate=!0,g.do_string=!1,(g.pushcount>0||g.filters)&&(g.pushstate=!1,g.do_string=!0)),h.pushstate?(c(e).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_weekView_AjaxStart"),c.post(TribeWeek.ajaxurl,g.params,function(a){if(g.initial_load=!1,f.enable_inputs("#tribe_events_filters_form","input, select"),a.success){g.ajax_running=!1,d.ajax_response={total_count:"",view:a.view,max_pages:"",tribe_paged:"",timestamp:(new Date).getTime()};var h="";h=c.isFunction(c.fn.parseHTML)?c.parseHTML(a.html):a.html,c("#tribe-events-content.tribe-events-week-grid").replaceWith(h),r(),c("div[id*='tribe-events-event-']").hide().fadeIn("fast"),g.page_title=c("#tribe-events-header").data("title"),b.title=g.page_title,g.do_string&&history.pushState({tribe_url_params:g.url_params,tribe_params:g.params},g.page_title,d.cur_url+"?"+g.url_params),g.pushstate&&history.pushState({tribe_url_params:g.url_params,tribe_params:g.params},g.page_title,d.cur_url),c(e).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_weekView_AjaxSuccess")}})):a.location=g.url_params.length?d.cur_url+"?"+g.url_params:d.cur_url}}var u=c("body"),v=c("#tribe-bar-date"),w=c("#tribe-events"),x=c("#tribe-events-bar"),y=c("#tribe-events-header"),z=0,A=!1,B=c(".column.tribe-week-grid-hours div:first-child");Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),y.length&&(z=y.data("startofweek")),x.addClass("tribe-has-datepicker");var C=y.data("date");"0"!==g.datepicker_format&&(C=tribeDateFormat(C,"tribeQuery")),g.date=C;var D=[0,1,2,3,4,5,6],E=D.indexOf(z);E>-1&&D.splice(E,1);var F="yyyy-mm-dd";if("0"!==g.datepicker_format){F=d.datepicker_formats.main[g.datepicker_format];var G=f.get_url_param("tribe-bar-date");G&&v.val(tribeDateFormat(G,g.datepicker_format))}if(d.datepicker_opts={format:F,weekStart:z,daysOfWeekDisabled:D,autoclose:!0},v.bootstrapDatepicker(d.datepicker_opts).on("changeDate",function(a){if(!g.updating_picker){var b=tribeDateFormat(a.date,"tribeQuery");g.date=b,A=!0,(h.no_bar()||h.live_ajax()&&h.pushstate)&&(h.reset_on()||s(a,b))}}),r(),c(e).on("tribe_ev_resizeComplete",function(){r()}),h.pushstate&&!h.map_view()){var H="action=tribe_week&eventDate="+g.date;d.params.length&&(H=H+"&"+d.params),g.category&&(H=H+"&tribe_event_category="+g.category),history.replaceState({tribe_params:H,tribe_url_params:d.params},"",location.href),c(a).on("popstate",function(a){var b=a.originalEvent.state;b&&(g.do_string=!1,g.pushstate=!1,g.popping=!0,g.params=b.tribe_params,g.url_params=b.tribe_url_params,f.pre_ajax(function(){t()}),f.set_form(g.params))})}w.on("click",".tribe-events-nav-previous, .tribe-events-nav-next",function(a){if(a.preventDefault(),!g.ajax_running){var b=c(this).find("a");g.popping=!1,g.date=b.attr("data-week"),d.cur_url=b.attr("href"),f.update_picker("0"!==g.datepicker_format?tribeDateFormat(g.date,d.datepicker_formats.main[g.datepicker_format]):g.date),f.pre_ajax(function(){t()})}}),c("form#tribe-bar-form").on("submit",function(a){s(a,null)}),f.snap("#tribe-events-content","body","#tribe-events-footer .tribe-events-nav-previous, #tribe-events-footer .tribe-events-nav-next"),c(e).on("tribe_ev_runAjax",function(){t()})})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);